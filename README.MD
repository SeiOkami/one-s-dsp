# Доработки Стандартных Подсистем (ДСП)

Данный проект - это объединение разных инструментов и доработок для Библиотеки Стандартных Подсистем

Можно внедрить все доработки целиком (установкой расширения) и активировать отдельные возможности в панели настроек

Или же можно брать отдельные доступные возможности и либо внедрять их в свою конфигурацию, либо использовать в качестве внешних инструментов

## Панель настроек

![image](/docs/img/settings_panel.png)

При внедрении расширения в конфигурации появляется подсистема "Доработки стандартных подсистем" и обработка "Настройка доработок БСП (ДСП)"

e1cib/app/Обработка.ДСП_Настройки

### Общие настройки

- **Частота обновления** - Как часто нужно обновлять настройки ДСП

### Доработки подсистемы "Оценка производительности"

- **Зафиксировать замеры** - БСП накапливает клиентские замеры (например, отчеты) и фиксирует их раз в Х времени. Кнопка позволяет принудительно зафиксировать накопленные клиентские замеры
- **Переименования КО** - Инструмент для переименования КО (описан ниже)
- **Перенос замеров из ИФО** - Инструмент для переноса замеров отчетов из подсистемы Истории формирования отчетов (описан ниже)
- **Использовать доработки подсистемы** - Общий тумблер, позволяющий разом отключить использования всех доработок подсистемы "Оценка производительности"
- **Фиксировать быстрые формирования отчетов** - в БСП "быстрые" формирования отчетов (условно, секунда) *могут быть* проигнорированы и не попадут в замеры времени. При включении данной доработки такие замеры попадут в регистр БСП
- **Фиксировать замеры перед завершением сеанса** - При завершении сеанса необработанные замеры теряются. Данная доработка принудительно фиксирует замеры при завершении сеанса
- Дополнительно в элементе справочника "Ключевые операции" расширение добавляет кнопку "Объект метаданных КО", которая открывает объект метаданных (или вариант отчета) данной ключевой операции

### Доработки подсистемы "Варианты отчетов"

- **Использовать доработки подсистемы** - Общий тумблер, позволяющий разом отключить использования всех доработок подсистемы "Варианты отчетов"

- **Расширенные события формы** - Добавляет в БСП возможность отлавливать клиентские переопределяемые события внутри специальной формы внутри текущего отчета. Стандартно БСП позволяет переопределить серверные методы внутри отчета, но клиентские необходимо обязательно прописывать в переопределяемых модулях. Данная доработка позволяет переопределить клиентские методы внутри формы самого отчета и не потребует доработок конфигурации. Пример реализации есть по кнопке "Пример отчета". Работает и с внешними отчетами  
Перехватываемые события:
    - ПослеФормирования
    - ОбработкаРасшифровки
    - ОбработкаДополнительнойРасшифровки
    - ОбработчикКоманды
    - ПриНачалеВыбораЗначений
    - ОбработкаВыбора
    - ОбработкаВыбораТабличногоДокумента
    - ОбработкаОповещения
    - ПриНажатииКнопкиВыбораПериода

## Именование ключевых операций

Инструмент предназначен для массового приведения наименований ключевых операций в читабельный вид. Можно использовать без расширения (внешняя обработка)

По умолчанию БСП генерирует КО с наименованиями, где просто разделяет ключ по заглавным буквам. Так же БСП генерирует КО для вариантов отчетов, указывая в наименовании ключ варианта. Ключ пользовательского варианта всегда GUID. Из-за чего визуально нельзя понять замеры какого варианта мы видим.

Пример переименований на скрине:  
![image](/docs/img/naming_ko.jpg)

## Перенос замеров из истории формирования отчетов

Инструмент предназначен для переноса замеров из подсистемы [История формирования отчетов](https://github.com/magnit-tech/one-s-reports-history) в регистр БСП "Замеры времени"

Можно использовать без расширения (внешняя обработка)

Если вы использовали подсистему истории формирования отчетов и хотите начать пользоваться Оценкой производительности БСП, то можно перенести все замеры времени по отчетам при помощи этого инструмента

![image](/docs/img/perenos_ifo.png)
